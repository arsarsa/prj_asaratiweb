<!-- uploadfile/signup.html -->
<!-- Backend -->

<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrazione</title>
</head>
<body>
    <h1>Registrati</h1>

    <form id="signup-form">
        <label for="signup-email">Email:</label>
        <input type="email" id="signup-email" placeholder="Email" required><br><br>
        
        <label for="signup-password">Password:</label>
        <input type="password" id="signup-password" placeholder="Password" required><br><br>
        
        <button type="submit">Registrati</button>
    </form>
    
    <p>Hai gi√† un account? <a href="/uploadfile/login_upload.html">Accedi</a></p>
    
    <p id="signup-error-message"></p>

<script type="module">
    console.log("üîπ Inizio importazione signup.js");

    import { signUp } from "./scripts/signup.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-auth.js";
    import { app } from "./scripts/firebase-config.js";

    const auth = getAuth(app);

    document.addEventListener("DOMContentLoaded", () => {
        console.log("‚úÖ Documento caricato!");

        const signupForm = document.getElementById("signup-form");
        if (signupForm) {
            console.log("üìå Form di registrazione trovato!");
            signupForm.addEventListener("submit", (e) => {
                e.preventDefault();
                const email = document.getElementById("signup-email").value;
                const password = document.getElementById("signup-password").value;
                console.log("üìå Tentativo di registrazione con:", email);
                signUp(email, password);
            });
        } else {
            console.error("‚ùå Errore: Form di registrazione NON trovato!");
        }
    });
</script>

</body>
</html>
